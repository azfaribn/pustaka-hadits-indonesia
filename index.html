<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pustaka Hadits Indonesia</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    
    <script type="importmap">
    {
      "imports": {
        "react": "https://esm.sh/react@18.2.0",
        "react-dom/client": "https://esm.sh/react-dom@18.2.0/client",
        "lucide-react": "https://esm.sh/lucide-react@0.263.1",
        "@supabase/supabase-js": "https://esm.sh/@supabase/supabase-js@2"
      }
    }
    </script>

    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <link href="https://fonts.googleapis.com/css2?family=Amiri:ital,wght@0,400;0,700;1,400&family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        .font-serif { font-family: 'Amiri', serif; }
        .font-sans { font-family: 'Inter', sans-serif; }
        .custom-scrollbar::-webkit-scrollbar { width: 6px; }
        .custom-scrollbar::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 4px; }
        .animate-fade-in { animation: fade-in 0.2s ease-out forwards; }
        @keyframes fade-in { from { opacity: 0; transform: scale(0.95); } to { opacity: 1; transform: scale(1); } }
    </style>
</head>
<body class="bg-slate-50 text-slate-800">

    <div id="root"></div>

    <script type="text/babel" data-type="module">
        import React, { useState, useMemo, useEffect } from 'react';
        import ReactDOM from 'react-dom/client';
        import { createClient } from '@supabase/supabase-js';
        import { BookOpen, Search, Info, Tag, Book, Filter, X, ChevronDown, Star, Users, FileText, Loader2, AlertCircle, RefreshCw, Database, ArrowDownCircle, WifiOff, Copy, Check, Heart, Coffee, Wallet, Share2 } from 'lucide-react';

        // --- KONFIGURASI SUPABASE ---
        const SUPABASE_URL = "https://rvadnytkliparikxdjau.supabase.co";
        const SUPABASE_ANON_KEY = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InJ2YWRueXRrbGlwYXJpa3hkamF1Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjQyOTY0MTQsImV4cCI6MjA3OTg3MjQxNH0.tOvhBtbdfj43nv8Ijdfgh2WAGRqsw-Zzr4ckM2imIbU";
        
        const supabase = createClient(SUPABASE_URL, SUPABASE_ANON_KEY);

        // --- DAFTAR KITAB DENGAN ALIAS (Untuk Smart Search) ---
        const BOOK_CATEGORIES = [
          { id: "Shahih Al-Bukhari", aliases: ["bukhari", "bukari"], label: "Shahih Al-Bukhari", desc: "Kitab hadits paling shahih." },
          { id: "Shahih Muslim", aliases: ["muslim"], label: "Shahih Muslim", desc: "Kitab tershahih kedua." },
          { id: "Sunan Abu Dawud", aliases: ["dawud", "daud", "abu dawud"], label: "Sunan Abu Dawud", desc: "Fokus pada hadits hukum." },
          { id: "Jami' At-Tirmidzi", aliases: ["tirmidzi", "tirmid", "tirmidhi"], label: "Jami' At-Tirmidzi", desc: "Menjelaskan kualitas hadits." }, 
          { id: "Sunan An-Nasa'i", aliases: ["nasai", "nasa", "nasa'i"], label: "Sunan An-Nasa'i", desc: "Syarat perawi ketat." },
          { id: "Sunan Ibnu Majah", aliases: ["majah", "ibnu majah", "ibn majah"], label: "Sunan Ibnu Majah", desc: "Hadits pelengkap." },
          { id: "Muwatta Malik", aliases: ["malik", "muwatta", "muwatho"], label: "Muwatta Malik", desc: "Hadits dan fiqih Madinah." },
          { id: "Musnad Ahmad", aliases: ["ahmad", "ahmed"], label: "Musnad Ahmad", desc: "Koleksi hadits terbesar." },
          { id: "Sunan Ad-Darimi", aliases: ["darimi", "ad-darimi"], label: "Sunan Ad-Darimi", desc: "Hadits etika dan adab." },
          { id: "Hadits Qudsi", aliases: ["qudsi", "qudsy"], label: "Hadits Qudsi", desc: "Firman Allah via Nabi." }
        ];

        // --- SMART SEARCH PARSER ---
        const parseSmartSearch = (text) => {
            if (!text) return { type: 'empty' };
            const cleanText = text.trim().toLowerCase();

            // 1. Cek Pola: "Kitab + Nomor" (Contoh: "Bukhari 203", "Muslim no 50")
            for (const book of BOOK_CATEGORIES) {
                for (const alias of book.aliases) {
                    // Regex: mencari kata kunci kitab diikuti angka
                    const regex = new RegExp(`(?:hr|hadits)?\\s*${alias}\\s*(?:no|nomor|:|#)?\\s*(\\d+)`, 'i');
                    const match = cleanText.match(regex);
                    
                    if (match) {
                        return { 
                            type: 'specific_book_number', 
                            bookId: book.id, 
                            number: match[1] 
                        };
                    }
                }
            }

            // 2. Cek Pola: "Hanya Angka" (Contoh: "203")
            if (/^\d+$/.test(cleanText)) {
                return { type: 'number_only', number: cleanText };
            }

            // 3. Cek Teks Biasa
            return { type: 'text', keyword: cleanText };
        };

        const enrichHadithData = (data) => {
          return data.map((item, index) => {
            let newItem = { ...item };
            newItem.no_hadits = item.nomor || (index + 1).toString();
            const textToCheck = (newItem.terjemah || "").toLowerCase();

            // Normalisasi Kitab (Agar tampilan rapi)
            if (newItem.kitab) {
                const k = newItem.kitab.toLowerCase();
                if (k.includes("bukhari")) newItem.kitab = "Shahih Al-Bukhari";
                else if (k.includes("muslim")) newItem.kitab = "Shahih Muslim";
                else if (k.includes("dawud")) newItem.kitab = "Sunan Abu Dawud";
                else if (k.includes("tirmid")) newItem.kitab = "Jami' At-Tirmidzi";
                else if (k.includes("nasa")) newItem.kitab = "Sunan An-Nasa'i";
                else if (k.includes("majah")) newItem.kitab = "Sunan Ibnu Majah";
                else if (k.includes("malik") || k.includes("muwatta")) newItem.kitab = "Muwatta Malik";
                else if (k.includes("ahmad") || k.includes("ahmed")) newItem.kitab = "Musnad Ahmad";
                else if (k.includes("darimi")) newItem.kitab = "Sunan Ad-Darimi";
                else if (k.includes("qudsi")) newItem.kitab = "Hadits Qudsi";
            }

            // Deteksi Topik
            if (!newItem.topik || newItem.topik.length === 0) {
              const detectedTopics = [];
              if (textToCheck.includes("sholat") || textToCheck.includes("shalat")) detectedTopics.push("Shalat");
              if (textToCheck.includes("puasa")) detectedTopics.push("Puasa");
              if (textToCheck.includes("zakat") || textToCheck.includes("sedekah")) detectedTopics.push("Zakat/Sedekah");
              if (textToCheck.includes("iman")) detectedTopics.push("Iman");
              if (textToCheck.includes("akhlak")) detectedTopics.push("Akhlak");
              if (textToCheck.includes("ilmu")) detectedTopics.push("Ilmu");
              if (textToCheck.includes("nikah")) detectedTopics.push("Nikah");
              if (detectedTopics.length === 0) detectedTopics.push("Umum");
              newItem.topik = detectedTopics;
            }

            // Deteksi Perawi
            if (!newItem.perawi_utama) {
              const perawiMatch = textToCheck.match(/^dari\s+([a-zA-Z\s']+)/i);
              newItem.perawi_utama = perawiMatch ? perawiMatch[1] : "Sahabat Nabi";
            }
            if (!newItem.derajat) newItem.derajat = { kategori: "shahih" };

            return newItem;
          });
        };

        const CopyButton = ({ textToCopy }) => {
          const [copied, setCopied] = useState(false);
          const handleCopy = (e) => {
            e.stopPropagation();
            navigator.clipboard.writeText(textToCopy).then(() => {
                setCopied(true); setTimeout(() => setCopied(false), 2000);
            });
          };
          return (
            <button onClick={handleCopy} className={`p-2 rounded-full transition-all ${copied ? 'bg-emerald-100 text-emerald-700' : 'bg-slate-50 text-slate-400 hover:bg-emerald-50 hover:text-emerald-600'}`}>
              {copied ? <Check className="w-4 h-4" /> : <Copy className="w-4 h-4" />}
            </button>
          );
        };

        const ShareButton = ({ title, text }) => {
          const handleShare = async (e) => {
            e.stopPropagation();
            if (navigator.share) { try { await navigator.share({ title, text }); } catch (err) {} }
            else { navigator.clipboard.writeText(text); alert("Teks disalin."); }
          };
          return (
            <button onClick={handleShare} className={`p-2 rounded-full transition-all bg-slate-50 text-slate-400 hover:bg-blue-50 hover:text-blue-600`}>
              <Share2 className="w-4 h-4" />
            </button>
          );
        };

        const KategoriBadge = ({ value }) => (
          <span className="text-[10px] px-2 py-0.5 rounded-full font-bold uppercase tracking-wider bg-emerald-100 text-emerald-800 border border-emerald-200">
            {value || 'Hadits'}
          </span>
        );

        // --- MAIN APP ---
        const App = () => {
          const [hadithData, setHadithData] = useState([]);
          const [loading, setLoading] = useState(false);
          const [error, setError] = useState(null);
          
          const [selectedBook, setSelectedBook] = useState(BOOK_CATEGORIES[0].id);
          const [searchQuery, setSearchQuery] = useState("");
          const [page, setPage] = useState(0);
          const [hasMore, setHasMore] = useState(true);
          const [dbStatus, setDbStatus] = useState("");
          const [forcedBookLabel, setForcedBookLabel] = useState(null); // Label header jika search lintas kitab

          const [selectedHadith, setSelectedHadith] = useState(null);
          const [isModalOpen, setIsModalOpen] = useState(false);
          const [isDonationOpen, setIsDonationOpen] = useState(false);

          const ITEMS_PER_PAGE = 20;

          const fetchHadits = async (isLoadMore = false) => {
            if (!isLoadMore) {
              setLoading(true);
              setPage(0);
              setForcedBookLabel(null); // Reset header
            }
            setError(null);

            try {
              const currentPage = isLoadMore ? page + 1 : 0;
              const offset = currentPage * ITEMS_PER_PAGE;
              
              // --- LOGIKA SMART SEARCH ---
              const searchIntent = parseSmartSearch(searchQuery);
              let query = supabase.from('hadits').select('*');

              // 1. Jika Pola "Kitab + Angka" (Bukhari 203)
              if (searchIntent.type === 'specific_book_number') {
                  query = query.ilike('kitab', `%${searchIntent.bookId}%`);
                  query = query.eq('nomor', searchIntent.number);
                  if (!isLoadMore) setForcedBookLabel(`Hasil: ${searchIntent.bookId} #${searchIntent.number}`);
              } 
              // 2. Jika Pola "Angka Saja" (203) -> Cari di kitab aktif
              else if (searchIntent.type === 'number_only') {
                  const bookConfig = BOOK_CATEGORIES.find(b => b.id === selectedBook);
                  const keyword = bookConfig ? bookConfig.queryKey : "Bukhari";
                  query = query.ilike('kitab', `%${keyword}%`);
                  query = query.eq('nomor', searchIntent.number);
              } 
              // 3. Jika Teks Biasa / Kosong
              else {
                  const bookConfig = BOOK_CATEGORIES.find(b => b.id === selectedBook);
                  const keyword = bookConfig ? bookConfig.queryKey : "Bukhari";
                  query = query.ilike('kitab', `%${keyword}%`);
                  
                  if (searchIntent.type === 'text') {
                      const q = searchIntent.keyword;
                      query = query.or(`terjemah.ilike.%${q}%,arab.ilike.%${q}%`);
                  }
              }

              // Filter Data Kosong & Pagination
              query = query.not('arab', 'is', null).not('terjemah', 'is', null);
              query = query.range(offset, offset + ITEMS_PER_PAGE - 1).order('id', { ascending: true });

              const { data, error } = await query;
              
              if (error) throw error;

              if (data) {
                const enriched = enrichHadithData(data);
                
                if (isLoadMore) {
                  setHadithData(prev => [...prev, ...enriched]);
                  setPage(currentPage);
                } else {
                  setHadithData(enriched);
                  setDbStatus(enriched.length > 0 ? "" : "Data tidak ditemukan. Coba kata kunci lain.");
                }
                setHasMore(data.length === ITEMS_PER_PAGE);
              }
            } catch (err) {
              console.warn("Fetch error:", err);
              setError("Gagal memuat data.");
            } finally {
              setLoading(false);
            }
          };

          // Debounce Search
          useEffect(() => {
            const timer = setTimeout(() => {
              fetchHadits(false);
            }, 600);
            return () => clearTimeout(timer);
          }, [selectedBook, searchQuery]);

          const handleLoadMore = () => fetchHadits(true);

          const openModal = (hadith) => {
            setSelectedHadith(hadith);
            setIsModalOpen(true);
          };

          const currentBookDesc = BOOK_CATEGORIES.find(b => b.id === selectedBook)?.desc;

          return (
            <div className="min-h-screen bg-slate-50 font-sans text-slate-800 pb-20">
              {/* HEADER */}
              <header className="bg-emerald-700 text-white shadow-lg sticky top-0 z-40">
                <div className="container mx-auto px-4 py-4">
                  <div className="flex flex-col lg:flex-row justify-between items-center gap-4">
                    <div className="flex items-center gap-3 w-full lg:w-auto justify-between lg:justify-start">
                      <div className="flex items-center gap-3">
                        <BookOpen className="w-8 h-8 text-emerald-200" />
                        <div>
                          <h1 className="text-xl md:text-2xl font-bold tracking-tight">Pustaka Hadits</h1>
                          <p className="text-emerald-100 text-[10px] md:text-xs">Ensiklopedia Digital Terlengkap</p>
                        </div>
                      </div>
                      <button onClick={() => setIsDonationOpen(true)} className="lg:hidden flex items-center gap-2 bg-emerald-600 hover:bg-emerald-500 text-white px-3 py-1.5 rounded-full text-xs font-medium border border-emerald-500">
                        <Heart className="w-3 h-3 fill-current" /> Dukung
                      </button>
                    </div>
                    <div className="flex items-center gap-4 w-full lg:w-auto">
                      <div className="relative flex-grow lg:w-80">
                        <input 
                          type="text" 
                          placeholder="Cari... (Contoh: Puasa, atau Bukhari 203)" 
                          className="w-full pl-10 pr-4 py-2 rounded-full bg-emerald-800/50 border border-emerald-600 focus:outline-none focus:bg-emerald-800 text-white placeholder-emerald-300 transition text-sm"
                          value={searchQuery}
                          onChange={(e) => setSearchQuery(e.target.value)}
                        />
                        <Search className="absolute left-3 top-2.5 w-4 h-4 text-emerald-300" />
                      </div>
                      <button onClick={() => setIsDonationOpen(true)} className="hidden lg:flex items-center gap-2 bg-emerald-600 hover:bg-emerald-500 text-white px-4 py-2 rounded-full text-sm font-bold transition border border-emerald-500">
                        <Heart className="w-4 h-4 fill-current" /> Dukung Kami
                      </button>
                    </div>
                  </div>
                </div>
              </header>

              <main className="container mx-auto px-4 py-8">
                {/* NAVIGASI KITAB (Sembunyikan jika sedang search spesifik) */}
                {!forcedBookLabel && (
                    <div className="mb-8">
                      <div className="flex justify-between items-center mb-3 px-1">
                        <h2 className="text-sm font-bold text-slate-500 uppercase tracking-wider">Pilih Kitab</h2>
                      </div>
                      <div className="flex flex-wrap gap-2 justify-center md:justify-start">
                        {BOOK_CATEGORIES.map((book) => (
                          <button
                            key={book.id}
                            onClick={() => { setSelectedBook(book.id); setSearchQuery(""); }} 
                            className={`px-4 py-2 rounded-lg text-sm font-medium transition-all shadow-sm border ${selectedBook === book.id ? 'bg-emerald-600 text-white border-emerald-600 shadow-emerald-200 transform scale-105' : 'bg-white text-slate-600 border-slate-200 hover:bg-slate-50 hover:border-emerald-300'}`}
                          >
                            {book.label}
                          </button>
                        ))}
                      </div>
                    </div>
                )}

                {/* INFO BAR */}
                <div className="flex flex-col md:flex-row justify-between items-start md:items-center mb-6 gap-4 bg-white p-4 rounded-xl border border-slate-100 shadow-sm">
                  <div className="flex items-center gap-3">
                    <div className="p-2 bg-emerald-100 rounded-lg text-emerald-700"><Book className="w-5 h-5" /></div>
                    <div>
                      {/* Judul Kitab / Header Pencarian */}
                      <h3 className="text-lg font-bold text-slate-800">
                        {forcedBookLabel ? forcedBookLabel : selectedBook}
                      </h3>
                      <p className="text-slate-500 text-xs">
                        {forcedBookLabel ? "Menampilkan hasil pencarian spesifik." : currentBookDesc}
                      </p>
                    </div>
                  </div>
                  <div className="text-xs text-slate-400 font-medium">
                    {loading ? "Memproses..." : `Ditemukan ${hadithData.length} hadits`}
                  </div>
                </div>

                {/* LOADING */}
                {loading && !hadithData.length && (
                  <div className="flex flex-col items-center justify-center py-20 text-emerald-600">
                    <Loader2 className="w-10 h-10 animate-spin mb-4" />
                    <p>Mengambil data...</p>
                  </div>
                )}

                {/* EMPTY STATE */}
                {!loading && hadithData.length === 0 && (
                  <div className="text-center py-20 text-slate-400 bg-white rounded-xl border border-dashed border-slate-300">
                    <Database className="w-12 h-12 mx-auto mb-3 opacity-20" />
                    <p>{dbStatus || "Tidak ada hadits ditemukan."}</p>
                    <button onClick={() => { setSearchQuery(""); fetchHadits(false); }} className="mt-4 flex items-center gap-2 px-4 py-2 bg-emerald-50 text-emerald-600 rounded-lg hover:bg-emerald-100 text-sm font-medium transition mx-auto">
                      <RefreshCw className="w-3 h-3" /> Reset
                    </button>
                  </div>
                )}

                {/* GRID RESULTS */}
                <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                  {hadithData.map((item, idx) => (
                    <div key={`${item.id}-${idx}`} className="bg-white rounded-xl shadow-sm hover:shadow-md transition-all border border-slate-100 overflow-hidden flex flex-col group relative" onClick={() => openModal(item)}>
                      <div className="px-4 pt-4 pb-2 flex justify-between items-start bg-slate-50/50 border-b border-slate-100">
                        <div className="flex items-center gap-2">
                          <span className="bg-emerald-600 text-white text-[11px] font-bold px-2 py-0.5 rounded shadow-sm">#{item.no_hadits}</span>
                          <span className="text-[11px] font-medium text-slate-500 bg-white border border-slate-200 px-2 py-0.5 rounded truncate max-w-[120px]">{item.topik && item.topik[0] ? item.topik[0] : "Umum"}</span>
                        </div>
                        <div className="flex gap-1 z-10">
                           <CopyButton textToCopy={`${item.arab}\n\n${item.terjemah}\n(${item.kitab} No. ${item.no_hadits})`} />
                           <ShareButton title={`Hadits ${item.kitab} No. ${item.no_hadits}`} text={`${item.arab}\n\n${item.terjemah}\n(${item.kitab} No. ${item.no_hadits})`} />
                        </div>
                      </div>
                      <div className="p-5 pt-3 flex-grow cursor-pointer">
                        <p className="text-right font-serif text-xl leading-loose mb-3 text-slate-800 line-clamp-3" dir="rtl">{item.arab}</p>
                        <p className="text-slate-600 text-sm line-clamp-3 mb-2 leading-relaxed">{item.terjemah}</p>
                      </div>
                      <div className="px-5 py-3 border-t border-slate-100 flex justify-between items-center text-xs text-slate-400 font-medium bg-slate-50/30 group-hover:bg-emerald-50/30 transition-colors">
                        <span>Baca Selengkapnya</span>
                        <ChevronDown className="w-4 h-4 transform -rotate-90 group-hover:text-emerald-600" />
                      </div>
                    </div>
                  ))}
                </div>

                {/* LOAD MORE */}
                {hasMore && hadithData.length > 0 && !loading && (
                  <div className="flex justify-center mt-10 mb-8">
                    <button onClick={handleLoadMore} className="flex items-center gap-2 px-8 py-3 bg-white border border-slate-200 text-slate-600 rounded-full hover:bg-emerald-50 hover:border-emerald-200 hover:text-emerald-700 transition shadow-sm font-medium">
                      <ArrowDownCircle className="w-4 h-4" /> Muat Lebih Banyak
                    </button>
                  </div>
                )}
              </main>

              {/* MODAL DETAIL */}
              {isModalOpen && selectedHadith && (
                <div className="fixed inset-0 z-50 flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-fade-in">
                  <div className="bg-white rounded-2xl shadow-2xl w-full max-w-3xl max-h-[90vh] overflow-hidden flex flex-col">
                    <div className="bg-emerald-700 text-white px-6 py-4 flex justify-between items-center shrink-0 shadow-md z-10">
                      <div>
                        <h2 className="text-lg font-bold flex items-center gap-2"><Book className="w-5 h-5 text-emerald-200" /> {selectedHadith.kitab}</h2>
                        <div className="flex items-center gap-2 mt-1">
                          <span className="bg-emerald-800/50 text-emerald-100 px-2 py-0.5 rounded text-xs font-mono">No. {selectedHadith.no_hadits}</span>
                          <span className="text-emerald-100 text-xs">â€¢ {selectedHadith.topik ? selectedHadith.topik.join(", ") : "Umum"}</span>
                        </div>
                      </div>
                      <button onClick={() => setIsModalOpen(false)} className="p-2 hover:bg-emerald-600 rounded-full transition text-emerald-100 hover:text-white"><X className="w-6 h-6" /></button>
                    </div>
                    <div className="p-6 overflow-y-auto custom-scrollbar bg-slate-50/50">
                      <div className="bg-white p-6 rounded-xl shadow-sm border border-slate-100 mb-6">
                        <p className="text-right font-serif text-3xl leading-[2.2] text-slate-800 mb-8" dir="rtl">{selectedHadith.arab}</p>
                        <div className="h-px bg-gradient-to-r from-transparent via-emerald-200 to-transparent w-full mb-6 opacity-60"></div>
                        <p className="text-slate-700 text-lg leading-relaxed font-medium">{selectedHadith.terjemah}</p>
                      </div>
                      <div className="grid grid-cols-1 sm:grid-cols-2 gap-4 mb-2">
                        <div className="bg-white p-4 rounded-lg border border-slate-100 shadow-sm">
                          <h4 className="flex items-center gap-2 font-bold text-slate-400 text-xs uppercase tracking-wider mb-2"><Users className="w-3 h-3" /> Perawi</h4>
                          <p className="text-slate-800 font-semibold">{selectedHadith.perawi_utama}</p>
                        </div>
                        <div className="bg-white p-4 rounded-lg border border-slate-100 shadow-sm">
                           <h4 className="flex items-center gap-2 font-bold text-slate-400 text-xs uppercase tracking-wider mb-2"><Star className="w-3 h-3" /> Kualitas</h4>
                           <KategoriBadge value={selectedHadith.derajat?.kategori} />
                        </div>
                      </div>
                    </div>
                    <div className="p-4 border-t border-slate-200 bg-white flex justify-between items-center shrink-0">
                       <div className="flex gap-2">
                         <CopyButton textToCopy={`${selectedHadith.arab}\n\n${selectedHadith.terjemah}\n\n(HR. ${selectedHadith.kitab} No. ${selectedHadith.no_hadits})`} className="border border-slate-200 hover:border-emerald-500 hover:text-emerald-600" />
                         <ShareButton title={`Hadits ${selectedHadith.kitab}`} text={`${selectedHadith.arab}\n\n${selectedHadith.terjemah}`} className="border border-slate-200 hover:border-blue-500 hover:text-blue-600" />
                       </div>
                       <button onClick={() => setIsModalOpen(false)} className="px-6 py-2 bg-slate-100 text-slate-600 rounded-lg hover:bg-slate-200 font-medium transition text-sm">Tutup</button>
                    </div>
                  </div>
                </div>
              )}

              {/* MODAL DONASI */}
              {isDonationOpen && (
                <div className="fixed inset-0 z-[60] flex items-center justify-center p-4 bg-slate-900/70 backdrop-blur-sm animate-fade-in">
                  <div className="bg-white rounded-2xl shadow-xl w-full max-w-md overflow-hidden relative">
                    <button onClick={() => setIsDonationOpen(false)} className="absolute top-4 right-4 p-1 rounded-full hover:bg-slate-100"><X className="w-5 h-5 text-slate-400" /></button>
                    <div className="bg-emerald-50 p-8 text-center border-b border-emerald-100">
                      <Coffee className="w-10 h-10 text-emerald-600 mx-auto mb-3" />
                      <h3 className="text-xl font-bold text-emerald-800">Dukung Pustaka Hadits</h3>
                      <p className="text-emerald-700/80 text-sm mt-2">Bantu operasional server dakwah digital ini.</p>
                    </div>
                    <div className="p-6 space-y-4">
                      <div className="bg-slate-50 p-4 rounded-xl border border-slate-100 flex items-center gap-4">
                        <div className="p-3 bg-white rounded-lg shadow-sm"><Wallet className="w-6 h-6 text-blue-600" /></div>
                        <div>
                          <p className="text-xs text-slate-400 font-bold uppercase">BCA (Bank Central Asia)</p>
                          <div className="flex items-center gap-2">
                            <p className="text-lg font-mono font-bold text-slate-800">095-475-8989</p>
                            <CopyButton textToCopy="0954758989" className="p-1 w-6 h-6" />
                          </div>
                          <p className="text-xs text-slate-500">a.n. Almi Yudianto</p>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              )}

              <footer className="bg-white border-t border-slate-200 mt-12 py-8 text-center text-slate-400 text-xs">
                <p>&copy; {new Date().getFullYear()} Pustaka Hadits Indonesia</p>
              </footer>
            </div>
          );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
